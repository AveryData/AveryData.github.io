---
title: "D3.js"
excerpt: "Data Visualization package in JavaScript"
---

## Steps to D3
1) Create empty project folder

2) Download latest version of D3 (see [https://d3js.org]). Place inside that folder and unzip.

3) Create an empty HTML page named index.html. HTML is just plain text so you can write in an text editor, I personally use [Atom](atom.io)


The majority of the time you can view local HTML files directly in your web browser. Sometimes it won't work as the browser may prevent JavaScript for security reasons. To be more reliable, you could set up your own local web server.


## Writing Chained Code
Here's an example of some code via chains:

d3   - references the D3 object.

.select("body")    - takes in a CSS selector as input and returns a reference to the first element in the document that matches.

.append("p")    - adds a new element in our document and throws it inside the end of whatever was selected.

.txt("This is a paragraph")    - inserts a string into the opening and closing tags of the selection.

That same code is rewritten without chains as:

var body = d3.select("body");

var p = body.append("p");

p.text("Hello this is my paragraph");

## Getting Data in

### Written Arrays
You can always just create an array such as:

'''javascript
var dataset = [5,10,15,20,25]
'''

But more than likely you'll have a JSON or csv.

### CSV's

CSV's can be read in such as:

'''javascript
d3.csv("food.csv", function(data) {
    console.log(data);
});
'''

This takes in a path to the csv and an anonymous function called a *callback function*. That is, the function is only called after the csv has been loaded into memory. In this case, the data is just being logged.

D3 defaults to loading in everything as a string. You could create a function to make sure the variables are read the way you want them to.

'''javascript
var rowConverter = function(d) {
    return {
        Food: d.Food,  //No conversion
        Deliciousness: parseFloat(d.Deliciousness)
    };
}

d3.csv("food.csv", rowConverter, function(data) {
    console.log(data);
});

'''

### JSON
JSON seems to be very popular in D3. It isn't dissimilar to the csv function.

'''javascript
d3.json("waterfallVelocities.json", function(json) {
    console.log(json);  //Log output to console
});

'''


## Using that data
In order to use that data, it has to be associated with an element in the document that is already created.

If you wanted to create paragraphs with each value from a csv you could write:

'''javascript
d3.select("body").selectAll("p")
    .data(dataset)
    .enter()
    .append("p")
    .text(function(d) { return d; });

'''

## Learn D3
Scott Murray's *Interactive Data Visualization for the Web*

Refer to [the API Reference](https://github.com/d3/d3/blob/master/API.md) OFTEN

## Animations in D3
[This medium article is good](https://towardsdatascience.com/animated-storytelling-using-the-javascript-d3-library-a1c2264142ad)

[Moving thousands of dots](https://bl.ocks.org/pbeshai/65420c8d722cdbb0600b276c3adcc6e8)

[Animated Bubble Chart](https://observablehq.com/@kevin110604/moving-bubble-chart-using-d3-js)

[Amelia Watternberger](https://wattenberger.com/f)
